{
    "LOGIN_USER": "SELECT id, f_name, l_name, email, logon_id, last_logged_on, is_admin, status_id FROM person WHERE logon_id = :1 AND password = :2;",
    "MEMBER_PROFILE": "SELECT id, f_name, l_name, email, logon_id, last_logged_on, is_admin, status_id FROM person WHERE id = :1;",
    "UPDATE_LAST_LOGON": "UPDATE person SET last_logged_on = CURRENT_TIMESTAMP WHERE id = :1;",
    "SEARCH_BOOKS_PUB": "SELECT bk.*, auth.id as author_id, auth.name AS author, awd.id as award_id, awd.name AS award, fmt.id as format_id, fmt.type AS format, gnr.id as genre_id, gnr.type AS genre FROM (SELECT bk.*, (SELECT COUNT(book_id) FROM book_copy bc WHERE bc.book_id = bk.id) AS total_copies, (SELECT COUNT(book_id) FROM book_copy bc WHERE bc.book_id = bk.id AND borrow_status_id = 1) AS available_copies FROM (SELECT publishDate, rating, likedPercent, bk.id, title, series, description, isbn, edition, pages, numRatings, coverImg, price, bk.lang_id, lang.name as lang, bk.publisher_id, pub.name as pub_name FROM book bk LEFT OUTER JOIN publisher pub ON pub.id = bk.publisher_id LEFT OUTER JOIN language lang ON lang.id = bk.lang_id  WHERE (LOWER(title) LIKE :1 OR LOWER(description) LIKE :2) AND lang_id = :3 ORDER BY 1 DESC LIMIT :4, :5) bk ) bk   LEFT OUTER JOIN book_author bauth on bk.id = bauth.book_id    LEFT OUTER JOIN author auth on bauth.author_id = auth.id    LEFT OUTER JOIN book_award bawd on bk.id = bawd.book_id    LEFT OUTER JOIN award awd on bawd.award_id = awd.id    LEFT OUTER JOIN book_format bfmt on bk.id = bfmt.book_id    LEFT OUTER JOIN format fmt on bfmt.format_id = fmt.id    LEFT OUTER JOIN book_genre bgnr on bk.id = bgnr.book_id    LEFT OUTER JOIN genre gnr on bgnr.genre_id = gnr.id;",
    "SEARCH_BOOKS_RTG": "SELECT bk.*, auth.id as author_id, auth.name AS author, awd.id as award_id, awd.name AS award, fmt.id as format_id, fmt.type AS format, gnr.id as genre_id, gnr.type AS genre FROM (SELECT bk.*, (SELECT COUNT(book_id) FROM book_copy bc WHERE bc.book_id = bk.id) AS total_copies, (SELECT COUNT(book_id) FROM book_copy bc WHERE bc.book_id = bk.id AND borrow_status_id = 1) AS available_copies FROM (SELECT publishDate, rating, likedPercent, bk.id, title, series, description, isbn, edition, pages, numRatings, coverImg, price, bk.lang_id, lang.name as lang, bk.publisher_id, pub.name as pub_name FROM book bk LEFT OUTER JOIN publisher pub ON pub.id = bk.publisher_id LEFT OUTER JOIN language lang ON lang.id = bk.lang_id  WHERE (LOWER(title) LIKE :1 OR LOWER(description) LIKE :2) AND lang_id = :3 ORDER BY 2 DESC LIMIT :4, :5) bk ) bk   LEFT OUTER JOIN book_author bauth on bk.id = bauth.book_id    LEFT OUTER JOIN author auth on bauth.author_id = auth.id    LEFT OUTER JOIN book_award bawd on bk.id = bawd.book_id    LEFT OUTER JOIN award awd on bawd.award_id = awd.id    LEFT OUTER JOIN book_format bfmt on bk.id = bfmt.book_id    LEFT OUTER JOIN format fmt on bfmt.format_id = fmt.id    LEFT OUTER JOIN book_genre bgnr on bk.id = bgnr.book_id    LEFT OUTER JOIN genre gnr on bgnr.genre_id = gnr.id;",
    "SEARCH_BOOKS_LKD": "SELECT bk.*, auth.id as author_id, auth.name AS author, awd.id as award_id, awd.name AS award, fmt.id as format_id, fmt.type AS format, gnr.id as genre_id, gnr.type AS genre FROM (SELECT bk.*, (SELECT COUNT(book_id) FROM book_copy bc WHERE bc.book_id = bk.id) AS total_copies, (SELECT COUNT(book_id) FROM book_copy bc WHERE bc.book_id = bk.id AND borrow_status_id = 1) AS available_copies FROM (SELECT publishDate, rating, likedPercent, bk.id, title, series, description, isbn, edition, pages, numRatings, coverImg, price, bk.lang_id, lang.name as lang, bk.publisher_id, pub.name as pub_name FROM book bk LEFT OUTER JOIN publisher pub ON pub.id = bk.publisher_id LEFT OUTER JOIN language lang ON lang.id = bk.lang_id  WHERE (LOWER(title) LIKE :1 OR LOWER(description) LIKE :2) AND lang_id = :3 ORDER BY 3 DESC LIMIT :4, :5) bk ) bk   LEFT OUTER JOIN book_author bauth on bk.id = bauth.book_id    LEFT OUTER JOIN author auth on bauth.author_id = auth.id    LEFT OUTER JOIN book_award bawd on bk.id = bawd.book_id    LEFT OUTER JOIN award awd on bawd.award_id = awd.id    LEFT OUTER JOIN book_format bfmt on bk.id = bfmt.book_id    LEFT OUTER JOIN format fmt on bfmt.format_id = fmt.id    LEFT OUTER JOIN book_genre bgnr on bk.id = bgnr.book_id    LEFT OUTER JOIN genre gnr on bgnr.genre_id = gnr.id;",
    "RECOMMENDED_BOOKS": "SELECT bk.*, auth.id as author_id, auth.name AS author, awd.id as award_id, awd.name AS award, fmt.id as format_id, fmt.type AS format, gnr.id as genre_id, gnr.type AS genre FROM (SELECT bk.*, (SELECT COUNT(book_id) FROM book_copy bc WHERE bc.book_id = bk.id) AS total_copies, (SELECT COUNT(book_id) FROM book_copy bc WHERE bc.book_id = bk.id AND borrow_status_id = 1) AS available_copies FROM (SELECT publishDate, rating, likedPercent, bk.id, title, series, description, isbn, edition, pages, numRatings, coverImg, price, bk.lang_id, lang.name as lang, bk.publisher_id, pub.name as pub_name FROM book bk LEFT OUTER JOIN publisher pub ON pub.id = bk.publisher_id LEFT OUTER JOIN language lang ON lang.id = bk.lang_id  WHERE bk.id IN %s) bk ) bk   LEFT OUTER JOIN book_author bauth on bk.id = bauth.book_id    LEFT OUTER JOIN author auth on bauth.author_id = auth.id    LEFT OUTER JOIN book_award bawd on bk.id = bawd.book_id    LEFT OUTER JOIN award awd on bawd.award_id = awd.id    LEFT OUTER JOIN book_format bfmt on bk.id = bfmt.book_id    LEFT OUTER JOIN format fmt on bfmt.format_id = fmt.id    LEFT OUTER JOIN book_genre bgnr on bk.id = bgnr.book_id    LEFT OUTER JOIN genre gnr on bgnr.genre_id = gnr.id;",
    "SEARCH_RECOMMENDED_BOOKS_PUB": "SELECT bk.*, auth.id as author_id, auth.name AS author, awd.id as award_id, awd.name AS award, fmt.id as format_id, fmt.type AS format, gnr.id as genre_id, gnr.type AS genre FROM (SELECT bk.*, (SELECT COUNT(book_id) FROM book_copy bc WHERE bc.book_id = bk.id) AS total_copies, (SELECT COUNT(book_id) FROM book_copy bc WHERE bc.book_id = bk.id AND borrow_status_id = 1) AS available_copies FROM (SELECT publishDate, rating, likedPercent, bk.id, title, series, description, isbn, edition, pages, numRatings, coverImg, price, bk.lang_id, lang.name as lang, bk.publisher_id, pub.name as pub_name FROM book bk LEFT OUTER JOIN publisher pub ON pub.id = bk.publisher_id LEFT OUTER JOIN language lang ON lang.id = bk.lang_id  WHERE (LOWER(title) LIKE :1 OR LOWER(description) LIKE :2) AND lang_id = :3 ORDER BY RANDOM(), publishDate DESC LIMIT :4, :5) bk ) bk   LEFT OUTER JOIN book_author bauth on bk.id = bauth.book_id    LEFT OUTER JOIN author auth on bauth.author_id = auth.id    LEFT OUTER JOIN book_award bawd on bk.id = bawd.book_id    LEFT OUTER JOIN award awd on bawd.award_id = awd.id    LEFT OUTER JOIN book_format bfmt on bk.id = bfmt.book_id    LEFT OUTER JOIN format fmt on bfmt.format_id = fmt.id    LEFT OUTER JOIN book_genre bgnr on bk.id = bgnr.book_id    LEFT OUTER JOIN genre gnr on bgnr.genre_id = gnr.id;",
    "SEARCH_RECOMMENDED_BOOKS_RTG": "SELECT bk.*, auth.id as author_id, auth.name AS author, awd.id as award_id, awd.name AS award, fmt.id as format_id, fmt.type AS format, gnr.id as genre_id, gnr.type AS genre FROM (SELECT bk.*, (SELECT COUNT(book_id) FROM book_copy bc WHERE bc.book_id = bk.id) AS total_copies, (SELECT COUNT(book_id) FROM book_copy bc WHERE bc.book_id = bk.id AND borrow_status_id = 1) AS available_copies FROM (SELECT publishDate, rating, likedPercent, bk.id, title, series, description, isbn, edition, pages, numRatings, coverImg, price, bk.lang_id, lang.name as lang, bk.publisher_id, pub.name as pub_name FROM book bk LEFT OUTER JOIN publisher pub ON pub.id = bk.publisher_id LEFT OUTER JOIN language lang ON lang.id = bk.lang_id  WHERE (LOWER(title) LIKE :1 OR LOWER(description) LIKE :2) AND lang_id = :3 ORDER BY RANDOM(), rating DESC LIMIT :4, :5) bk ) bk   LEFT OUTER JOIN book_author bauth on bk.id = bauth.book_id    LEFT OUTER JOIN author auth on bauth.author_id = auth.id    LEFT OUTER JOIN book_award bawd on bk.id = bawd.book_id    LEFT OUTER JOIN award awd on bawd.award_id = awd.id    LEFT OUTER JOIN book_format bfmt on bk.id = bfmt.book_id    LEFT OUTER JOIN format fmt on bfmt.format_id = fmt.id    LEFT OUTER JOIN book_genre bgnr on bk.id = bgnr.book_id    LEFT OUTER JOIN genre gnr on bgnr.genre_id = gnr.id;",
    "SEARCH_RECOMMENDED_BOOKS_LKD": "SELECT bk.*, auth.id as author_id, auth.name AS author, awd.id as award_id, awd.name AS award, fmt.id as format_id, fmt.type AS format, gnr.id as genre_id, gnr.type AS genre FROM (SELECT bk.*, (SELECT COUNT(book_id) FROM book_copy bc WHERE bc.book_id = bk.id) AS total_copies, (SELECT COUNT(book_id) FROM book_copy bc WHERE bc.book_id = bk.id AND borrow_status_id = 1) AS available_copies FROM (SELECT publishDate, rating, likedPercent, bk.id, title, series, description, isbn, edition, pages, numRatings, coverImg, price, bk.lang_id, lang.name as lang, bk.publisher_id, pub.name as pub_name FROM book bk LEFT OUTER JOIN publisher pub ON pub.id = bk.publisher_id LEFT OUTER JOIN language lang ON lang.id = bk.lang_id  WHERE (LOWER(title) LIKE :1 OR LOWER(description) LIKE :2) AND lang_id = :3 ORDER BY RANDOM(), likedPercent DESC LIMIT :4, :5) bk ) bk   LEFT OUTER JOIN book_author bauth on bk.id = bauth.book_id    LEFT OUTER JOIN author auth on bauth.author_id = auth.id    LEFT OUTER JOIN book_award bawd on bk.id = bawd.book_id    LEFT OUTER JOIN award awd on bawd.award_id = awd.id    LEFT OUTER JOIN book_format bfmt on bk.id = bfmt.book_id    LEFT OUTER JOIN format fmt on bfmt.format_id = fmt.id    LEFT OUTER JOIN book_genre bgnr on bk.id = bgnr.book_id    LEFT OUTER JOIN genre gnr on bgnr.genre_id = gnr.id;",
    "LANGUAGES": "SELECT id, name FROM language WHERE name <> '';",
    "GET_BOOK_AVAILABILITY": "SELECT id FROM book_copy WHERE book_id = :1 AND borrow_status_id = 1 LIMIT 1;",
    "CREATE_BORROW_RECORD": "INSERT INTO borrowal (book_copy_id, person_id, borrow_date, return_date) VALUES (:1, :2, DATE(), DATE(DATE(), '+32 days'));",
    "BORROWALS_MEMBER": "SELECT bk.id as book_id, bw.book_copy_id, bw.person_id, bc.borrow_status_id, bk.title, bk.coverImg, lang.name AS lang, p.f_name, p.l_name, STRFTIME('%m/%d/%Y', bw.borrow_date) AS borrow_date, STRFTIME('%m/%d/%Y', bw.return_date) AS return_date FROM borrowal bw INNER JOIN book_copy bc ON bc.id = bw.book_copy_id AND bc.borrow_status_id <> 1 INNER JOIN book bk ON bk.id = bc.book_id INNER JOIN person p ON p.id = bw.person_id INNER JOIN language lang ON bk.lang_id = lang.id WHERE bw.person_id = :1 ORDER BY return_date, borrow_date;",
    "BORROWALS_ALL_MEMBERS": "SELECT bk.id as book_id, bw.book_copy_id, bw.person_id, bc.borrow_status_id, bk.title, bk.coverImg, lang.name AS lang, p.f_name, p.l_name, STRFTIME('%m/%d/%Y', bw.borrow_date) AS borrow_date, STRFTIME('%m/%d/%Y', bw.return_date) AS return_date FROM borrowal bw INNER JOIN book_copy bc ON bc.id = bw.book_copy_id AND bc.borrow_status_id <> 1 INNER JOIN book bk ON bk.id = bc.book_id INNER JOIN person p ON p.id = bw.person_id INNER JOIN language lang ON bk.lang_id = lang.id WHERE (bk.title LIKE :1 OR p.f_name LIKE :2 OR p.l_name LIKE :3) AND bc.borrow_status_id = :4 ORDER BY return_date DESC, borrow_date ASC LIMIT :5, :6;",
    "UPDATE_BOOK_COPY_BORROW_STATUS": "UPDATE book_copy SET borrow_status_id = :1 WHERE id = :2;",
    "CANCEL_BORROW": "DELETE FROM borrowal WHERE book_copy_id = :1 and person_id = :2;",
    "ADD_COPIES": "INSERT INTO book_copy(book_id, borrow_status_id) VALUES (:1, 1);",
    "GET_MEMBERS": "SELECT p.id, p.f_name, p.l_name, p.email, p.logon_id, st.status FROM person p LEFT OUTER JOIN person_status st ON st.id = p.status_id WHERE p.is_admin <> 1;",
    "RCMD_LOAD_BOOK_AUTHOR": "SELECT * FROM book_author;",
    "RCMD_LOAD_AUTHOR": "SELECT * FROM author;",
    "RCMD_LOAD_BOOK_GENRE": "SELECT * FROM book_genre;",
    "RCMD_LOAD_GENRE": "SELECT * FROM genre;",
    "RCMD_LOAD_BOOK_AWARD": "SELECT * FROM book_award;",
    "RCMD_LOAD_AWARD": "SELECT * FROM award;",
    "RCMD_LOAD_BOOK": "SELECT id, title, description, lang_id FROM book;",
    "RCMD_LOAD_LANG": "SELECT * FROM language;",
    "BOOKS_RCMND": "SELECT bk.id, lower(replace(bk.title, ',', ' ') || ' ' || replace(bk.description, ',', ' ') || ' ' || GROUP_CONCAT(replace(auth.name, ',', ' '), ', ') || ' ' || GROUP_CONCAT(replace(gnr.type, ',', ' '), ', ') || ' ' || GROUP_CONCAT(replace(awd.name, ',', ' '), ', ') || ' ' || lang.name) AS Combined FROM book bk INNER JOIN book_author ba ON ba.book_id = bk.id INNER JOIN author auth ON auth.id = ba.author_id INNER JOIN book_genre bg ON bg.book_id = bk.id INNER JOIN genre gnr ON gnr.id = bg.genre_id INNER JOIN book_award bw ON bw.book_id = bk.id INNER JOIN award awd ON awd.id = bw.award_id INNER JOIN language lang ON lang.id = bk.lang_id GROUP BY bk.id, bk.title, bk.description, lang.name;",
    "BOOKS_BORROWED_MEMBER_RCMND": "SELECT bk.id, lower(replace(bk.title, ',', ' ') || ' ' || replace(bk.description, ',', ' ') || ' ' || GROUP_CONCAT(replace(auth.name, ',', ' '), ', ') || ' ' || GROUP_CONCAT(replace(gnr.type, ',', ' '), ', ') || ' ' || GROUP_CONCAT(replace(awd.name, ',', ' '), ', ') || ' ' || lang.name) AS Combined FROM borrowal bw INNER JOIN book_copy bc ON bc.id = bw.book_copy_id INNER JOIN book bk ON bk.id = bc.book_id INNER JOIN book_author ba ON ba.book_id = bk.id INNER JOIN author auth ON auth.id = ba.author_id INNER JOIN book_genre bg ON bg.book_id = bk.id INNER JOIN genre gnr ON gnr.id = bg.genre_id INNER JOIN book_award bw ON bw.book_id = bk.id INNER JOIN award awd ON awd.id = bw.award_id INNER JOIN language lang ON lang.id = bk.lang_id WHERE bw.person_id = :1 GROUP BY bk.id, bk.title, bk.description, lang.name;",
    "BOOKS_BORROWED_OTHER_MEMBERS_RCMND": "SELECT bk.id, lower(replace(bk.title, ',', ' ') || ' ' || replace(bk.description, ',', ' ') || ' ' || GROUP_CONCAT(replace(auth.name, ',', ' '), ', ') || ' ' || GROUP_CONCAT(replace(gnr.type, ',', ' '), ', ') || ' ' || GROUP_CONCAT(replace(awd.name, ',', ' '), ', ') || ' ' || lang.name) AS Combined FROM borrowal bw INNER JOIN book_copy bc ON bc.id = bw.book_copy_id INNER JOIN book bk ON bk.id = bc.book_id INNER JOIN book_author ba ON ba.book_id = bk.id INNER JOIN author auth ON auth.id = ba.author_id INNER JOIN book_genre bg ON bg.book_id = bk.id INNER JOIN genre gnr ON gnr.id = bg.genre_id INNER JOIN book_award bw ON bw.book_id = bk.id INNER JOIN award awd ON awd.id = bw.award_id INNER JOIN language lang ON lang.id = bk.lang_id WHERE bw.person_id <> :1 AND bw.borrow_date >= DATE(DATE(), '-90 days') GROUP BY bk.id, bk.title, bk.description, lang.name;",
    "BOOKS_MOST_LIKED_RCMND": "SELECT bk.id, lower(replace(bk.title, ',', ' ') || ' ' || replace(bk.description, ',', ' ') || ' ' || GROUP_CONCAT(replace(auth.name, ',', ' '), ', ') || ' ' || GROUP_CONCAT(replace(gnr.type, ',', ' '), ', ') || ' ' || GROUP_CONCAT(replace(awd.name, ',', ' '), ', ') || ' ' || lang.name) AS Combined FROM book bk INNER JOIN book_author ba ON ba.book_id = bk.id INNER JOIN author auth ON auth.id = ba.author_id INNER JOIN book_genre bg ON bg.book_id = bk.id INNER JOIN genre gnr ON gnr.id = bg.genre_id INNER JOIN book_award bw ON bw.book_id = bk.id INNER JOIN award awd ON awd.id = bw.award_id INNER JOIN language lang ON lang.id = bk.lang_id GROUP BY bk.id, bk.title, bk.description, lang.name ORDER BY likedPercent DESC LIMIT 50;"
}